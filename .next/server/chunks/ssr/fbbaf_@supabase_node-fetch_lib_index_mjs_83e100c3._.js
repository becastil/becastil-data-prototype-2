module.exports=[7840,a=>{"use strict";a.s(["FetchError",()=>l,"Headers",()=>B,"Request",()=>Q,"Response",()=>I,"default",()=>X]);var b=a.i(88947),c=a.i(21517),d=a.i(92509),e=a.i(70705),f=a.i(24836),g=a.i(6461);let h=b.default.Readable,i=Symbol("buffer"),j=Symbol("type");class k{constructor(){this[j]="";let a=arguments[0],b=arguments[1],c=[];if(a){let b=Number(a.length);for(let d=0;d<b;d++){let b,e=a[d];(b=e instanceof Buffer?e:ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?Buffer.from(e):e instanceof k?e[i]:Buffer.from("string"==typeof e?e:String(e))).length,c.push(b)}}this[i]=Buffer.concat(c);let d=b&&void 0!==b.type&&String(b.type).toLowerCase();d&&!/[^\u0020-\u007E]/.test(d)&&(this[j]=d)}get size(){return this[i].length}get type(){return this[j]}text(){return Promise.resolve(this[i].toString())}arrayBuffer(){let a=this[i];return Promise.resolve(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}stream(){let a=new h;return a._read=function(){},a.push(this[i]),a.push(null),a}toString(){return"[object Blob]"}slice(){let a,b=this.size,c=arguments[0],d=arguments[1];a=void 0===c?0:c<0?Math.max(b+c,0):Math.min(c,b);let e=Math.max((void 0===d?b:d<0?Math.max(b+d,0):Math.min(d,b))-a,0),f=this[i].slice(a,a+e),g=new k([],{type:arguments[2]});return g[i]=f,g}}function l(a,b,c){Error.call(this,a),this.message=a,this.type=b,c&&(this.code=this.errno=c.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(k.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(k.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="FetchError";let m=Symbol("Body internals"),n=b.default.PassThrough;function o(a){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=d.size,f=d.timeout;null==a?a=null:q(a)?a=Buffer.from(a.toString()):r(a)||Buffer.isBuffer(a)||("[object ArrayBuffer]"===Object.prototype.toString.call(a)?a=Buffer.from(a):ArrayBuffer.isView(a)?a=Buffer.from(a.buffer,a.byteOffset,a.byteLength):a instanceof b.default||(a=Buffer.from(String(a)))),this[m]={body:a,disturbed:!1,error:null},this.size=void 0===e?0:e,this.timeout=void 0===f?0:f,a instanceof b.default&&a.on("error",function(a){let b="AbortError"===a.name?a:new l(`Invalid response body while trying to fetch ${c.url}: ${a.message}`,"system",a);c[m].error=b})}function p(){var a=this;if(this[m].disturbed)return o.Promise.reject(TypeError(`body used already for: ${this.url}`));if(this[m].disturbed=!0,this[m].error)return o.Promise.reject(this[m].error);let c=this.body;if(null===c)return o.Promise.resolve(Buffer.alloc(0));if(r(c)&&(c=c.stream()),Buffer.isBuffer(c))return o.Promise.resolve(c);if(!(c instanceof b.default))return o.Promise.resolve(Buffer.alloc(0));let d=[],e=0,f=!1;return new o.Promise(function(b,g){let h;a.timeout&&(h=setTimeout(function(){f=!0,g(new l(`Response timeout while trying to fetch ${a.url} (over ${a.timeout}ms)`,"body-timeout"))},a.timeout)),c.on("error",function(b){"AbortError"===b.name?(f=!0,g(b)):g(new l(`Invalid response body while trying to fetch ${a.url}: ${b.message}`,"system",b))}),c.on("data",function(b){if(!f&&null!==b){if(a.size&&e+b.length>a.size){f=!0,g(new l(`content size at ${a.url} over limit: ${a.size}`,"max-size"));return}e+=b.length,d.push(b)}}),c.on("end",function(){if(!f){clearTimeout(h);try{b(Buffer.concat(d,e))}catch(b){g(new l(`Could not create Buffer from response body for ${a.url}: ${b.message}`,"system",b))}}})})}function q(a){return"object"==typeof a&&"function"==typeof a.append&&"function"==typeof a.delete&&"function"==typeof a.get&&"function"==typeof a.getAll&&"function"==typeof a.has&&"function"==typeof a.set&&("URLSearchParams"===a.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(a)||"function"==typeof a.sort)}function r(a){return"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&"function"==typeof a.constructor&&"string"==typeof a.constructor.name&&/^(Blob|File)$/.test(a.constructor.name)&&/^(Blob|File)$/.test(a[Symbol.toStringTag])}function s(a){let c,d,e=a.body;if(a.bodyUsed)throw Error("cannot clone body after it is used");return e instanceof b.default&&"function"!=typeof e.getBoundary&&(c=new n,d=new n,e.pipe(c),e.pipe(d),a[m].body=c,e=d),e}function t(a){if(null===a)return null;if("string"==typeof a)return"text/plain;charset=UTF-8";if(q(a))return"application/x-www-form-urlencoded;charset=UTF-8";if(r(a))return a.type||null;if(Buffer.isBuffer(a))return null;else if("[object ArrayBuffer]"===Object.prototype.toString.call(a))return null;else if(ArrayBuffer.isView(a))return null;else if("function"==typeof a.getBoundary)return`multipart/form-data;boundary=${a.getBoundary()}`;else if(a instanceof b.default)return null;else return"text/plain;charset=UTF-8"}function u(a){let b=a.body;return null===b?0:r(b)?b.size:Buffer.isBuffer(b)?b.length:b&&"function"==typeof b.getLengthSync?b._lengthRetrievers&&0==b._lengthRetrievers.length||b.hasKnownLength&&b.hasKnownLength()?b.getLengthSync():null:null}o.prototype={get body(){return this[m].body},get bodyUsed(){return this[m].disturbed},arrayBuffer(){return p.call(this).then(function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)})},blob(){let a=this.headers&&this.headers.get("content-type")||"";return p.call(this).then(function(b){return Object.assign(new k([],{type:a.toLowerCase()}),{[i]:b})})},json(){var a=this;return p.call(this).then(function(b){try{return JSON.parse(b.toString())}catch(b){return o.Promise.reject(new l(`invalid json response body at ${a.url} reason: ${b.message}`,"invalid-json"))}})},text(){return p.call(this).then(function(a){return a.toString()})},buffer(){return p.call(this)},textConverted(){var a=this;return p.call(this).then(function(b){a.headers;throw Error("The package `encoding` must be installed to use the textConverted() function")})}},Object.defineProperties(o.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),o.mixIn=function(a){for(let b of Object.getOwnPropertyNames(o.prototype))if(!(b in a)){let c=Object.getOwnPropertyDescriptor(o.prototype,b);Object.defineProperty(a,b,c)}},o.Promise=a.g.Promise;let v=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,w=/[^\t\x20-\x7e\x80-\xff]/;function x(a){if(a=`${a}`,v.test(a)||""===a)throw TypeError(`${a} is not a legal HTTP header name`)}function y(a){if(a=`${a}`,w.test(a))throw TypeError(`${a} is not a legal HTTP header value`)}function z(a,b){for(let c in b=b.toLowerCase(),a)if(c.toLowerCase()===b)return c}let A=Symbol("map");class B{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[A]=Object.create(null),a instanceof B){let b=a.raw();for(let a of Object.keys(b))for(let c of b[a])this.append(a,c);return}if(null==a);else if("object"==typeof a){let b=a[Symbol.iterator];if(null!=b){if("function"!=typeof b)throw TypeError("Header pairs must be iterable");let c=[];for(let b of a){if("object"!=typeof b||"function"!=typeof b[Symbol.iterator])throw TypeError("Each header pair must be iterable");c.push(Array.from(b))}for(let a of c){if(2!==a.length)throw TypeError("Each header pair must be a name/value tuple");this.append(a[0],a[1])}}else for(let b of Object.keys(a)){let c=a[b];this.append(b,c)}}else throw TypeError("Provided initializer must be an object")}get(a){x(a=`${a}`);let b=z(this[A],a);return void 0===b?null:this[A][b].join(", ")}forEach(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=C(this),d=0;for(;d<c.length;){var e=c[d];let f=e[0],g=e[1];a.call(b,g,f,this),c=C(this),d++}}set(a,b){a=`${a}`,b=`${b}`,x(a),y(b);let c=z(this[A],a);this[A][void 0!==c?c:a]=[b]}append(a,b){a=`${a}`,b=`${b}`,x(a),y(b);let c=z(this[A],a);void 0!==c?this[A][c].push(b):this[A][a]=[b]}has(a){return x(a=`${a}`),void 0!==z(this[A],a)}delete(a){x(a=`${a}`);let b=z(this[A],a);void 0!==b&&delete this[A][b]}raw(){return this[A]}keys(){return E(this,"key")}values(){return E(this,"value")}[Symbol.iterator](){return E(this,"key+value")}}function C(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(a[A]).sort().map("key"===b?function(a){return a.toLowerCase()}:"value"===b?function(b){return a[A][b].join(", ")}:function(b){return[b.toLowerCase(),a[A][b].join(", ")]})}B.prototype.entries=B.prototype[Symbol.iterator],Object.defineProperty(B.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(B.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});let D=Symbol("internal");function E(a,b){let c=Object.create(F);return c[D]={target:a,kind:b,index:0},c}let F=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==F)throw TypeError("Value of `this` is not a HeadersIterator");var a=this[D];let b=a.target,c=a.kind,d=a.index,e=C(b,c);return d>=e.length?{value:void 0,done:!0}:(this[D].index=d+1,{value:e[d],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(F,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});let G=Symbol("Response internals"),H=c.default.STATUS_CODES;class I{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.call(this,a,b);let c=b.status||200,d=new B(b.headers);if(null!=a&&!d.has("Content-Type")){let b=t(a);b&&d.append("Content-Type",b)}this[G]={url:b.url,status:c,statusText:b.statusText||H[c],headers:d,counter:b.counter}}get url(){return this[G].url||""}get status(){return this[G].status}get ok(){return this[G].status>=200&&this[G].status<300}get redirected(){return this[G].counter>0}get statusText(){return this[G].statusText}get headers(){return this[G].headers}clone(){return new I(s(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}o.mixIn(I.prototype),Object.defineProperties(I.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});let J=Symbol("Request internals"),K=d.default.URL||e.default.URL,L=d.default.parse,M=d.default.format;function N(a){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(a)&&(a=new K(a).toString()),L(a)}let O="destroy"in b.default.Readable.prototype;function P(a){return"object"==typeof a&&"object"==typeof a[J]}class Q{constructor(a){let b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(a)?b=N(a.url):(b=a&&a.href?N(a.href):N(`${a}`),a={});let d=c.method||a.method||"GET";if(d=d.toUpperCase(),(null!=c.body||P(a)&&null!==a.body)&&("GET"===d||"HEAD"===d))throw TypeError("Request with GET/HEAD method cannot have body");let e=null!=c.body?c.body:P(a)&&null!==a.body?s(a):null;o.call(this,e,{timeout:c.timeout||a.timeout||0,size:c.size||a.size||0});let f=new B(c.headers||a.headers||{});if(null!=e&&!f.has("Content-Type")){let a=t(e);a&&f.append("Content-Type",a)}let g=P(a)?a.signal:null;if("signal"in c&&(g=c.signal),null!=g&&!function(a){let b=a&&"object"==typeof a&&Object.getPrototypeOf(a);return!!(b&&"AbortSignal"===b.constructor.name)}(g))throw TypeError("Expected signal to be an instanceof AbortSignal");this[J]={method:d,redirect:c.redirect||a.redirect||"follow",headers:f,parsedURL:b,signal:g},this.follow=void 0!==c.follow?c.follow:void 0!==a.follow?a.follow:20,this.compress=void 0!==c.compress?c.compress:void 0===a.compress||a.compress,this.counter=c.counter||a.counter||0,this.agent=c.agent||a.agent}get method(){return this[J].method}get url(){return M(this[J].parsedURL)}get headers(){return this[J].headers}get redirect(){return this[J].redirect}get signal(){return this[J].signal}clone(){return new Q(this)}}function R(a){Error.call(this,a),this.type="aborted",this.message=a,Error.captureStackTrace(this,this.constructor)}o.mixIn(Q.prototype),Object.defineProperty(Q.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Q.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R.prototype.name="AbortError";let S=d.default.URL||e.default.URL,T=b.default.PassThrough,U=function(a,b){let c=new S(b).hostname,d=new S(a).hostname;return c===d||"."===c[c.length-d.length-1]&&c.endsWith(d)};function V(a,d){if(!V.Promise)throw Error("native promise missing, set fetch.Promise to your favorite alternative");return o.Promise=V.Promise,new V.Promise(function(e,h){var i,j;let k,m,n=new Q(a,d),o=function(a){let c=a[J].parsedURL,d=new B(a[J].headers);if(d.has("Accept")||d.set("Accept","*/*"),!c.protocol||!c.hostname)throw TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(c.protocol))throw TypeError("Only HTTP(S) protocols are supported");if(a.signal&&a.body instanceof b.default.Readable&&!O)throw Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let e=null;if(null==a.body&&/^(POST|PUT)$/i.test(a.method)&&(e="0"),null!=a.body){let b=u(a);"number"==typeof b&&(e=String(b))}e&&d.set("Content-Length",e),d.has("User-Agent")||d.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),a.compress&&!d.has("Accept-Encoding")&&d.set("Accept-Encoding","gzip,deflate");let f=a.agent;return"function"==typeof f&&(f=f(c)),d.has("Connection")||f||d.set("Connection","close"),Object.assign({},c,{method:a.method,headers:function(a){let b=Object.assign({__proto__:null},a[A]),c=z(a[A],"Host");return void 0!==c&&(b[c]=b[c][0]),b}(d),agent:f})}(n),p=("https:"===o.protocol?f.default:c.default).request,q=n.signal,s=null,t=function(){let a=new R("The user aborted a request.");h(a),n.body&&n.body instanceof b.default.Readable&&W(n.body,a),s&&s.body&&s.body.emit("error",a)};if(q&&q.aborted)return void t();let x=function(){t(),C()},y=p(o);function C(){y.abort(),q&&q.removeEventListener("abort",x),clearTimeout(k)}q&&q.addEventListener("abort",x),n.timeout&&y.once("socket",function(a){k=setTimeout(function(){h(new l(`network timeout at: ${n.url}`,"request-timeout")),C()},n.timeout)}),y.on("error",function(a){h(new l(`request to ${n.url} failed, reason: ${a.message}`,"system",a)),s&&s.body&&W(s.body,a),C()}),i=y,j=function(a){(!q||!q.aborted)&&s&&s.body&&W(s.body,a)},i.on("socket",function(a){m=a}),i.on("response",function(a){let b=a.headers;"chunked"!==b["transfer-encoding"]||b["content-length"]||a.once("close",function(a){if(m&&m.listenerCount("data")>0&&!a){let a=Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",j(a)}})}),14>parseInt(process.version.substring(1))&&y.on("socket",function(a){a.addListener("close",function(b){let c=a.listenerCount("data")>0;if(s&&c&&!b&&!(q&&q.aborted)){let a=Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",s.body.emit("error",a)}})}),y.on("response",function(a){clearTimeout(k);let b=function(a){let b=new B;for(let c of Object.keys(a))if(!v.test(c))if(Array.isArray(a[c]))for(let d of a[c])w.test(d)||(void 0===b[A][c]?b[A][c]=[d]:b[A][c].push(d));else w.test(a[c])||(b[A][c]=[a[c]]);return b}(a.headers);if(V.isRedirect(a.statusCode)){let d=b.get("Location"),f=null;try{f=null===d?null:new S(d,n.url).toString()}catch(a){if("manual"!==n.redirect){h(new l(`uri requested responds with an invalid redirect URL: ${d}`,"invalid-redirect")),C();return}}switch(n.redirect){case"error":h(new l(`uri requested responds with a redirect, redirect mode is set to error: ${n.url}`,"no-redirect")),C();return;case"manual":if(null!==f)try{b.set("Location",f)}catch(a){h(a)}break;case"follow":var c;if(null===f)break;if(n.counter>=n.follow){h(new l(`maximum redirect reached at: ${n.url}`,"max-redirect")),C();return}let g={headers:new B(n.headers),follow:n.follow,counter:n.counter+1,agent:n.agent,compress:n.compress,method:n.method,body:n.body,signal:n.signal,timeout:n.timeout,size:n.size};if(!U(n.url,f)||(c=n.url,new S(f).protocol!==new S(c).protocol))for(let a of["authorization","www-authenticate","cookie","cookie2"])g.headers.delete(a);if(303!==a.statusCode&&n.body&&null===u(n)){h(new l("Cannot follow redirect with body being a readable stream","unsupported-redirect")),C();return}(303===a.statusCode||(301===a.statusCode||302===a.statusCode)&&"POST"===n.method)&&(g.method="GET",g.body=void 0,g.headers.delete("content-length")),e(V(new Q(f,g))),C();return}}a.once("end",function(){q&&q.removeEventListener("abort",x)});let d=a.pipe(new T),f={url:n.url,status:a.statusCode,statusText:a.statusMessage,headers:b,size:n.size,timeout:n.timeout,counter:n.counter},i=b.get("Content-Encoding");if(!n.compress||"HEAD"===n.method||null===i||204===a.statusCode||304===a.statusCode)return void e(s=new I(d,f));let j={flush:g.default.Z_SYNC_FLUSH,finishFlush:g.default.Z_SYNC_FLUSH};if("gzip"==i||"x-gzip"==i)return void e(s=new I(d=d.pipe(g.default.createGunzip(j)),f));if("deflate"==i||"x-deflate"==i){let b=a.pipe(new T);b.once("data",function(a){e(s=new I(d=(15&a[0])==8?d.pipe(g.default.createInflate()):d.pipe(g.default.createInflateRaw()),f))}),b.on("end",function(){s||e(s=new I(d,f))});return}if("br"==i&&"function"==typeof g.default.createBrotliDecompress)return void e(s=new I(d=d.pipe(g.default.createBrotliDecompress()),f));e(s=new I(d,f))});let D=n.body;null===D?y.end():r(D)?D.stream().pipe(y):Buffer.isBuffer(D)?(y.write(D),y.end()):D.pipe(y)})}function W(a,b){a.destroy?a.destroy(b):(a.emit("error",b),a.end())}V.isRedirect=function(a){return 301===a||302===a||303===a||307===a||308===a},V.Promise=a.g.Promise;let X=V}];

//# sourceMappingURL=fbbaf_%40supabase_node-fetch_lib_index_mjs_83e100c3._.js.map